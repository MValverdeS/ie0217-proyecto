<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: cuentas.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">cuentas.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Se definen las funciones asociadas con cuentas.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;sqlite3.h&gt;</code><br />
<code>#include &quot;<a class="el" href="cuentas_8hpp_source.html">cuentas.hpp</a>&quot;</code><br />
<code>#include &quot;utilidades.hpp&quot;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3af2d7ced067644e5c1ee28c9d43e9d9" id="r_a3af2d7ced067644e5c1ee28c9d43e9d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3af2d7ced067644e5c1ee28c9d43e9d9">crearCuenta</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:a3af2d7ced067644e5c1ee28c9d43e9d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Crea una nueva cuenta para un cliente existente en la base de datos.  <br /></td></tr>
<tr class="separator:a3af2d7ced067644e5c1ee28c9d43e9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c11e4f7993e3022bfa7bf8a453a530" id="r_a94c11e4f7993e3022bfa7bf8a453a530"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a94c11e4f7993e3022bfa7bf8a453a530">verCuentas</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:a94c11e4f7993e3022bfa7bf8a453a530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Esta función le pide al operario del banco el id del cliente, posteriormente busca en la base de datos todas las columnas de la tabla CUENTAS en donde ID_CLIENTE coincide con el valor introducido, esto mediante una consulta de sql dentro de la función se declara un puntero *stmt que se usa para manejar la declaración preparada y se usa sqlite3_prepare_v2 para para preparar la consulta y mostrar los mensajes de error posibles, se utiliza sqlite3_bind int para enlazar el valor de Idcliente con el el parámetro ?, posteriormente se utiliza un bucle while que itera sobre cada fila conseguida en la consulta mediante el uso de sqlite3_step estos valores se imprimen en la consola y luego se utiliza sqlite3_finalize para terminar la declaración de sql.  <br /></td></tr>
<tr class="separator:a94c11e4f7993e3022bfa7bf8a453a530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae00b3409f751f39795994e644ebbe9bc" id="r_ae00b3409f751f39795994e644ebbe9bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae00b3409f751f39795994e644ebbe9bc">realizarDeposito</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:ae00b3409f751f39795994e644ebbe9bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">La función realizarDeposito es una función tipo void que se encarga de manejar la lógica detrás de depósitos bancarios, se necesita que el usuario ingrese el id cliente y el id cuenta para hacer el depósito se verifica el tipo de moneda de la cuenta con la variable tipoCuenta y se hace una consulta sql para seleccionar la cuenta que corresponda con los valores introducidos, se guarda la moneda en la que se deposita en monedaDeposito y se utiliza un bucle while para verificar si la entrada de moneda es válida, posteriormente se pide el monto que se guarda en monto1 y si es necesario este se convierte con la función convertirMoneda, posteriormente se actualiza el monto en la cuenta utilizando una consulta sql y se registr la transacción en la tabla TRANSACCIONES.  <br /></td></tr>
<tr class="separator:ae00b3409f751f39795994e644ebbe9bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0772af0021392342a99646034a459cf7" id="r_a0772af0021392342a99646034a459cf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0772af0021392342a99646034a459cf7">realizarRetiro</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:a0772af0021392342a99646034a459cf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">La función realizarRetiro es una función tipo void que se encarga de manejar la lógica para realizar un retiro bancario de la cuenta de un cliente específico. Requiere que el usuario ingrese el ID del cliente y el ID de la cuenta desde la cual desea realizar el retiro.Primero, se solicita al usuario que ingrese el ID del cliente y el ID de la cuenta. Luego, se verifica si la cuenta pertenece al cliente mediante una consulta SQL que obtiene el saldo actual y el tipo de moneda de la cuenta. Si la cuenta pertenece al cliente, se procede a solicitar el monto a retirar y se verifica si el saldo es suficiente. Si el saldo es suficiente, se actualiza el saldo de la cuenta mediante una consulta SQL. Después, se registra la transacción de retiro en la tabla TRANSACCIONES, asegurándose de generar un nuevo ID de transacción. En caso de errores durante la preparación o ejecución de las consultas SQL, se muestra un mensaje de error correspondiente.  <br /></td></tr>
<tr class="separator:a0772af0021392342a99646034a459cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee9ced0969cab3d4fa5520177350d23e" id="r_aee9ced0969cab3d4fa5520177350d23e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee9ced0969cab3d4fa5520177350d23e">realizarTransferencia</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:aee9ced0969cab3d4fa5520177350d23e"><td class="mdescLeft">&#160;</td><td class="mdescRight">La función realizarTransferencia permite al cliente realizar una transferencia bancaria desde su cuenta de origen a otra cuenta destino. Requiere que el usuario ingrese su ID de cliente, así como los IDs de las cuentas de origen y destino, y el monto a transferir.Primero, se verifica si la cuenta de origen pertenece al cliente mediante una consulta SQL que obtiene el saldo y el tipo de moneda de la cuenta. Si la cuenta pertenece al cliente, se procede a verificar la existencia de la cuenta destino ingresada por el usuario. Se solicita al usuario ingresar el monto a transferir, asegurándose de que sea un número válido. Se verifica si el saldo de la cuenta de origen es suficiente para la transferencia. Si las cuentas de origen y destino tienen diferentes tipos de moneda, se realiza una conversión de moneda utilizando una función auxiliar. Luego, se realiza la transferencia actualizando los saldos de las cuentas de origen y destino mediante consultas SQL. Se registra la transacción en la tabla TRANSACCIONES, asegurándose de generar un nuevo ID de transacción. En caso de errores durante la preparación o ejecución de las consultas SQL, se muestra un mensaje de error correspondiente y se cancela la operación.  <br /></td></tr>
<tr class="separator:aee9ced0969cab3d4fa5520177350d23e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24fee8af25ceec4a112fbe3a1cadb7fd" id="r_a24fee8af25ceec4a112fbe3a1cadb7fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24fee8af25ceec4a112fbe3a1cadb7fd">verTransacciones</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:a24fee8af25ceec4a112fbe3a1cadb7fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">función que realiza una consulta en sql en base a un id de cliente introducido de manera similar a las funciones anteriores para seleccionar y ver todas columnas de la tabla TRANSACCIONES donde ID_CUENTA coincide con una subconsulta que selecciona todas cuentas que se asocien con el ID_CLIENTE que se introuce, esto mediante los métodos anteriormente mencionados, se utiliza un bucle while para iterar sobre las filas en la consulta y se almacenan los valores de las filas que coinciden, posteriormente estos valores se imprimen en la consola.  <br /></td></tr>
<tr class="separator:a24fee8af25ceec4a112fbe3a1cadb7fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Se definen las funciones asociadas con cuentas. </p>
<dl class="section author"><dt>Author</dt><dd>Gabriel González Rivera B93432 </dd>
<dd>
Edgar Marcelo Valverde Solís C08089 </dd>
<dd>
Daniel Rodríguez Rivas B96719 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>30/6/2024</dd></dl>
<p>Licencia: MIT </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3af2d7ced067644e5c1ee28c9d43e9d9" name="a3af2d7ced067644e5c1ee28c9d43e9d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3af2d7ced067644e5c1ee28c9d43e9d9">&#9670;&#160;</a></span>crearCuenta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crearCuenta </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Crea una nueva cuenta para un cliente existente en la base de datos. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Puntero a la base de datos SQLite. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae00b3409f751f39795994e644ebbe9bc" name="ae00b3409f751f39795994e644ebbe9bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae00b3409f751f39795994e644ebbe9bc">&#9670;&#160;</a></span>realizarDeposito()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void realizarDeposito </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>La función realizarDeposito es una función tipo void que se encarga de manejar la lógica detrás de depósitos bancarios, se necesita que el usuario ingrese el id cliente y el id cuenta para hacer el depósito se verifica el tipo de moneda de la cuenta con la variable tipoCuenta y se hace una consulta sql para seleccionar la cuenta que corresponda con los valores introducidos, se guarda la moneda en la que se deposita en monedaDeposito y se utiliza un bucle while para verificar si la entrada de moneda es válida, posteriormente se pide el monto que se guarda en monto1 y si es necesario este se convierte con la función convertirMoneda, posteriormente se actualiza el monto en la cuenta utilizando una consulta sql y se registr la transacción en la tabla TRANSACCIONES. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>corresponde a un puntero hacia una base de datos de sqlite3, en este caso se utilizará un puntero a la base de datos correspondiente al proyecto. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0772af0021392342a99646034a459cf7" name="a0772af0021392342a99646034a459cf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0772af0021392342a99646034a459cf7">&#9670;&#160;</a></span>realizarRetiro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void realizarRetiro </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>La función realizarRetiro es una función tipo void que se encarga de manejar la lógica para realizar un retiro bancario de la cuenta de un cliente específico. Requiere que el usuario ingrese el ID del cliente y el ID de la cuenta desde la cual desea realizar el retiro.Primero, se solicita al usuario que ingrese el ID del cliente y el ID de la cuenta. Luego, se verifica si la cuenta pertenece al cliente mediante una consulta SQL que obtiene el saldo actual y el tipo de moneda de la cuenta. Si la cuenta pertenece al cliente, se procede a solicitar el monto a retirar y se verifica si el saldo es suficiente. Si el saldo es suficiente, se actualiza el saldo de la cuenta mediante una consulta SQL. Después, se registra la transacción de retiro en la tabla TRANSACCIONES, asegurándose de generar un nuevo ID de transacción. En caso de errores durante la preparación o ejecución de las consultas SQL, se muestra un mensaje de error correspondiente. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Puntero a una base de datos de sqlite3, en este caso se utilizará un puntero a la base de datos correspondiente al proyecto. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aee9ced0969cab3d4fa5520177350d23e" name="aee9ced0969cab3d4fa5520177350d23e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee9ced0969cab3d4fa5520177350d23e">&#9670;&#160;</a></span>realizarTransferencia()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void realizarTransferencia </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>La función realizarTransferencia permite al cliente realizar una transferencia bancaria desde su cuenta de origen a otra cuenta destino. Requiere que el usuario ingrese su ID de cliente, así como los IDs de las cuentas de origen y destino, y el monto a transferir.Primero, se verifica si la cuenta de origen pertenece al cliente mediante una consulta SQL que obtiene el saldo y el tipo de moneda de la cuenta. Si la cuenta pertenece al cliente, se procede a verificar la existencia de la cuenta destino ingresada por el usuario. Se solicita al usuario ingresar el monto a transferir, asegurándose de que sea un número válido. Se verifica si el saldo de la cuenta de origen es suficiente para la transferencia. Si las cuentas de origen y destino tienen diferentes tipos de moneda, se realiza una conversión de moneda utilizando una función auxiliar. Luego, se realiza la transferencia actualizando los saldos de las cuentas de origen y destino mediante consultas SQL. Se registra la transacción en la tabla TRANSACCIONES, asegurándose de generar un nuevo ID de transacción. En caso de errores durante la preparación o ejecución de las consultas SQL, se muestra un mensaje de error correspondiente y se cancela la operación. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Puntero a la base de datos sqlite3 donde se almacenarán los datos y se realizarán las operaciones de transferencia. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a94c11e4f7993e3022bfa7bf8a453a530" name="a94c11e4f7993e3022bfa7bf8a453a530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c11e4f7993e3022bfa7bf8a453a530">&#9670;&#160;</a></span>verCuentas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void verCuentas </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Esta función le pide al operario del banco el id del cliente, posteriormente busca en la base de datos todas las columnas de la tabla CUENTAS en donde ID_CLIENTE coincide con el valor introducido, esto mediante una consulta de sql dentro de la función se declara un puntero *stmt que se usa para manejar la declaración preparada y se usa sqlite3_prepare_v2 para para preparar la consulta y mostrar los mensajes de error posibles, se utiliza sqlite3_bind int para enlazar el valor de Idcliente con el el parámetro ?, posteriormente se utiliza un bucle while que itera sobre cada fila conseguida en la consulta mediante el uso de sqlite3_step estos valores se imprimen en la consola y luego se utiliza sqlite3_finalize para terminar la declaración de sql. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>corresponde a un puntero hacia una base de datos de sqlite3, en este caso se utilizará un puntero a la base de datos correspondiente al proyecto </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a24fee8af25ceec4a112fbe3a1cadb7fd" name="a24fee8af25ceec4a112fbe3a1cadb7fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24fee8af25ceec4a112fbe3a1cadb7fd">&#9670;&#160;</a></span>verTransacciones()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void verTransacciones </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>función que realiza una consulta en sql en base a un id de cliente introducido de manera similar a las funciones anteriores para seleccionar y ver todas columnas de la tabla TRANSACCIONES donde ID_CUENTA coincide con una subconsulta que selecciona todas cuentas que se asocien con el ID_CLIENTE que se introuce, esto mediante los métodos anteriormente mencionados, se utiliza un bucle while para iterar sobre las filas en la consulta y se almacenan los valores de las filas que coinciden, posteriormente estos valores se imprimen en la consola. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>corresponde a un puntero hacia una base de datos de sqlite3, en este caso se utilizará un puntero a la base de datos correspondiente al proyecto. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
